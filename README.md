# Leetcode challenge bot
## Зачем нужен бот
Telegram бот помогает автоматизировать процесс подсчета статистики во время совместного прохождении челленджа на [сайта leetcode](https://leetcode.com/).  Это позволит пользователям быстро и легко получать информацию о своих достижениях и прогрессе в решении задач. Бот будет полезен для тех, кто хочет улучшить свои навыки программирования и участвовать в совместных обучающих проектах.
## Что умеет бот
- Хранит статистику в базе данных MySQL 
- Предоставляет удобный вывод дейлика и статистики по запросу
- Ежедневно выводит статистику результатов участников и закрепляет сообщение в чате
- Каждый день сообщает в чат участникам о дейлике 
## Что нужно для запуска бота
Так как бот хранит статистику в базе данных MySQL, необходим сервер, на котором будет развернута СУБД. База данных должна иметь следующие столбцы:
```
id типа int в качестве PK                   // id tg-пользователя, отправившего отчет о решенной задаче		
name типа longtext                          // имя tg-пользователя, отправившего отчет
date типа datetime                          // время отправки отчета
level типа tinytext                         // уровень сложности задачи
link типа varchar(150) в качестве PK        // ссылка на задачу
description типа longtext                   // комментарий к решению или задаче
```
Также для работы бота необходим config.py файл, в котором будут записаны следующие значения:
```
TOKEN_API                // уникальный ключ бота, необходимый для отправки запросов
host                     // адрес MySQL сервера
user                     // пользователь MySQL сервера
passwd                   // пароль для входа на MySQL сервер
database                 // имя базы данных
CHAT_ID                  // id чата с участниками челленджа 
REPORT_CHAT_ID           // id чата для отчетов о сохраении записи о задаче в базе данных
```
## Как работает бот
Обработка сообщений происходит следующим образом. Бот ждет сообщение по шаблону:
```
<уровень сложности задачи>
<ссылка на задачу>
<комментарий к решению или задаче>
```
### Пример:
```
easy
----
https://leetcode.com/problems/two-sum/
Любимейшая задача, каждый день с удовольствием решаю!!!
```
Можно дополнить сообщение скриншотом с решением задачи или прикрепить ссылку не на задачу, а на свое решение.

После того, как бот получит сообщение, сформированное по шаблону, он обработает его и запишет в базу данных. Так как первичными ключами в базе данных являются имя пользователя и ссылка на задачу, то один человек не может записать одну и ту же задачу дважды. 

Информацию о дейлике бот получает в результате выполнения GraphQL запроса на сайт leetcode, обрабатывает поступившие данные, форматирует и выводит описание задачи в удобном для чтении виде. 

При запуске бота он выведет общую статистику, закрепит сообщение о статистике в виде:
```
Статистика на dd/mm:
<username> - xx (xx easy xx medium xx hard)
<username> - xx (xx easy xx medium xx hard)
```
Через 12 часов после этого, ботом будет отправлена информация о дейлике. Через следующие 12 часов снова будет выведена и закреплена статистика уже на следующий день и так далее.

Также в боте реализован функционал вывода статистики и описания дейлика по запросу, со списком команд можно ознакомиться ниже.
## Список доступных команд
 - /help - вывод списка команд 
 - /stat - вывод статистики за все время челленджа 
 - /today - вывод статистики по челленджу за сегодня
 - /yesterday - вывод статистики по челленджу за вчера 
 - /week - вывод статистики по челленджу за неделю
 - /daily - вывод сегодняшнего дейлика
 - /chatID - вывод id чата с ботом (нужно для конфигурационного файла)
